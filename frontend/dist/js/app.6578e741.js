(function(){"use strict";var e={4784:function(e,a,n){var o=n(5130),r=n(6768);const t={id:"app"};function l(e,a,n,o,l,i){const s=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.CE)("div",t,[(0,r.bF)(s)])}var i=n(973),s={name:"App",components:{RouterView:i.Tp}},c=n(1241);const u=(0,c.A)(s,[["render",l]]);var d=u,p=n(4232),v=n.p+"img/ineval.152b4d1f.svg";const m={class:"login-container"},g={class:"form-group"},f={class:"form-group"},h={key:0,class:"error-message"};function b(e,a,n,t,l,i){return(0,r.uX)(),(0,r.CE)("div",m,[a[6]||(a[6]=(0,r.Lk)("img",{src:v,alt:"Logo de la Aplicación",class:"logo"},null,-1)),a[7]||(a[7]=(0,r.Lk)("h1",null,"Iniciar Sesión",-1)),(0,r.Lk)("form",{onSubmit:a[2]||(a[2]=(0,o.D$)(((...e)=>t.login&&t.login(...e)),["prevent"])),class:"login-form"},[(0,r.Lk)("div",g,[a[3]||(a[3]=(0,r.Lk)("label",{for:"email"},"Correo Electrónico:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>t.loginForm.email=e),required:""},null,512),[[o.Jo,t.loginForm.email]])]),(0,r.Lk)("div",f,[a[4]||(a[4]=(0,r.Lk)("label",{for:"password"},"Contraseña:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>t.loginForm.password=e),required:""},null,512),[[o.Jo,t.loginForm.password]])]),a[5]||(a[5]=(0,r.Lk)("button",{type:"submit",class:"login-button"},"Iniciar Sesión",-1)),t.error?((0,r.uX)(),(0,r.CE)("div",h,(0,p.v_)(t.error),1)):(0,r.Q3)("",!0)],32)])}n(4114);var k=n(144),y=n(586),w={name:"LoginView",setup(){const e=(0,k.Kh)({email:"",password:""}),a=(0,k.KR)(""),n="http://localhost:8000/api/login",o=(0,i.rd)(),r=async()=>{a.value="";try{const r=await y.A.post(n,e);r.data.token?(console.log("Login exitoso. Token:",r.data.token),localStorage.setItem("authToken",r.data.token),o.push("/camera")):a.value="Credenciales inválidas."}catch(r){console.error("Error al iniciar sesión:",r),a.value="Error al iniciar sesión. Por favor, inténtalo de nuevo.",r.response&&r.response.data&&r.response.data.errors&&(a.value=Object.values(r.response.data.errors).flat().join(", "))}};return{loginForm:e,error:a,login:r}}};const L=(0,c.A)(w,[["render",b],["__scopeId","data-v-52e0a342"]]);var C=L;const x={class:"camera-container"},E={ref:"cameraFeed",autoplay:"",class:"camara"},I={class:"canvas-text-container"},O={key:0,class:"error-alert"};function P(e,a,n,t,l,i){return(0,r.uX)(),(0,r.CE)("div",x,[a[4]||(a[4]=(0,r.Lk)("img",{src:v,alt:"Logo de la Aplicación",class:"logo"},null,-1)),a[5]||(a[5]=(0,r.Lk)("h1",null,"Captura de Imagen",-1)),(0,r.Lk)("video",E,null,512),(0,r.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>t.capturePhoto&&t.capturePhoto(...e)),class:"take-button"},"Tomar Foto"),(0,r.Lk)("div",I,[(0,r.Lk)("canvas",{ref:"capturedCanvas",onClick:a[1]||(a[1]=(...e)=>t.openImagePopup&&t.openImagePopup(...e)),class:"captura"},null,512),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>t.imageData=e),rows:"10",cols:"50",readonly:"",class:"texto"},null,512),[[o.Jo,t.imageData]])]),(0,r.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>t.sendImageData&&t.sendImageData(...e)),class:"take-button"},"Enviar"),t.cameraError?((0,r.uX)(),(0,r.CE)("div",O," Cámara desconectada o no permitida. ")):(0,r.Q3)("",!0)])}n(4979);function j(e){var a=e.split(","),n=a[0].match(/:(.*?);/)[1],o=atob(a[1]),r=o.length,t=new Uint8Array(r);while(r--)t[r]=o.charCodeAt(r);return new Blob([t],{type:n})}var F={name:"CameraView",setup(){const e=(0,k.KR)(null),a=(0,k.KR)(null),n=(0,k.KR)(""),o=(0,k.KR)(null),t=(0,k.KR)(!1),l=(0,k.KR)(null),i=(0,k.KR)(!1);navigator.mediaDevices.getUserMedia({video:!0}).then((n=>{l.value=n,e.value.srcObject=l.value,o.value=a.value.getContext("2d"),i.value=!1})).catch((e=>{console.error("Error accessing media devices.",e),i.value=!0})),(0,r.sV)((()=>{navigator.mediaDevices.getUserMedia({video:!0}).then((n=>{l.value=n,e.value.srcObject=l.value,o.value=a.value.getContext("2d"),t.value=!0})).catch((e=>{console.error("No existe acceso a la camara",e),t.value=!1}))}));const s=()=>{e.value&&o.value&&t.value?(o.value.drawImage(e.value,0,0,a.value.width,a.value.height),n.value=a.value.toDataURL("image/png")):t.value||alert("La cámara no está conectada.")},c=async()=>{if(e.value&&o.value&&t.value){const e=n.value,o="http://localhost:8000/api/images",r=j(e),t=new FormData;t.append("image",r,"captured_image.png"),t.append("token",localStorage.getItem("authToken"));try{const e=await y.A.post(o,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("authToken")}`}});console.log("Imagen subida exitosamente:",e.data),alert("Foto guardada en el backend exitosamente!")}catch(a){console.error("Error al guardar la foto:",a),alert("Error al guardar la foto en el backend."),a.response&&a.response.data&&console.log("Error del backend (detalles):",a.response.data)}}else t.value?n.value||alert("Por favor, captura una foto primero."):alert("La cámara no está conectada.")},u=()=>{if(n.value){const e=window.open("","Imagen Capturada","resizable=yes,scrollbars=no");e?e.document.body.innerHTML=`\n                  <style>\n                    body {\n                      background-color: #e9ecef;\n                      margin: 0;\n                      display: flex;\n                      justify-content: center;\n                      align-items: center;\n                      min-height: 100vh;\n                    }\n                    .image-container {\n                      background-color: white;\n                      padding: 20px;\n                      border-radius: 5px;\n                      box-shadow: 3px 3px 10px rgba(0,0,0,0.1);\n                    }\n                    img {\n                      max-width: 95vw;\n                      max-height: 95vh;\n                      display: block;\n                      margin: 0 auto;\n                    }\n                  </style>\n                  <div class="image-container">\n                    <img src="${n.value}" alt="Imagen Capturada">\n                  </div>\n                `:alert("La ventana emergente fue bloqueada. Por favor, permite las ventanas emergentes para ver la imagen.")}else alert("Por favor, captura una foto primero.")};return{cameraFeed:e,capturePhoto:s,capturedCanvas:a,imageData:n,sendImageData:c,cameraError:i,openImagePopup:u}}};const T=(0,c.A)(F,[["render",P],["__scopeId","data-v-725b2ec6"]]);var A=T;const D=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:C},{path:"/camera",name:"Camera",component:A}],S=(0,i.aE)({history:(0,i.Bt)(),routes:D});var R=S;const _=(0,o.Ef)(d);_.use(R),_.mount("#app")}},a={};function n(o){var r=a[o];if(void 0!==r)return r.exports;var t=a[o]={exports:{}};return e[o].call(t.exports,t,t.exports,n),t.exports}n.m=e,function(){var e=[];n.O=function(a,o,r,t){if(!o){var l=1/0;for(u=0;u<e.length;u++){o=e[u][0],r=e[u][1],t=e[u][2];for(var i=!0,s=0;s<o.length;s++)(!1&t||l>=t)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(i=!1,t<l&&(l=t));if(i){e.splice(u--,1);var c=r();void 0!==c&&(a=c)}}return a}t=t||0;for(var u=e.length;u>0&&e[u-1][2]>t;u--)e[u]=e[u-1];e[u]=[o,r,t]}}(),function(){n.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(a,{a:a}),a}}(),function(){n.d=function(e,a){for(var o in a)n.o(a,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p=""}(),function(){var e={524:0};n.O.j=function(a){return 0===e[a]};var a=function(a,o){var r,t,l=o[0],i=o[1],s=o[2],c=0;if(l.some((function(a){return 0!==e[a]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(s)var u=s(n)}for(a&&a(o);c<l.length;c++)t=l[c],n.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return n.O(u)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(4784)}));o=n.O(o)})();
//# sourceMappingURL=app.6578e741.js.map